@if (form) {
    <div class="dialog-container" [formGroup]="form">
        <div class="title" mat-dialog-title>
            <h1>{{ data.spellLevel | titleCase }}</h1>
            <span>
                <label for="total-casts">Casts per day:</label>
                <input id="total-casts" formControlName="totalCastsPerDay" type="number" />
            </span>
        </div>
        <div mat-dialog-content class="grid-layout">
            <div class="full-width">
                <small>Prepare</small>
                <small>Spell Name</small>
            </div>
            @for (spell of spellKeys; track spell) {
                <ng-container formGroupName="spells">
                    <ng-container [formGroupName]="$index">
                        <div class="full-width">
                            <mat-form-field class="no-bottom-margin">
                                <mat-checkbox matPrefix formControlName="isPrepared"></mat-checkbox>
                                <input matInput formControlName="name" placeholder="Enter spell name" />
                                <mat-icon (click)="onDeleteSpell($index)" matSuffix>delete</mat-icon>
                            </mat-form-field>
                        </div>
                        <mat-form-field class="full-width">
                            <mat-label>Description</mat-label>
                            <textarea
                                matInput
                                cdkTextareaAutosize
                                #autosize="cdkTextareaAutosize"
                                cdkAutosizeMinRows="1"
                                formControlName="description"
                            ></textarea>
                        </mat-form-field>
                    </ng-container>
                </ng-container>
                <div class="section-break">&#x2022;</div>
            }
            <button class="add-spell-button full-width" mat-button (click)="onAddSpell()">Add Spell</button>
        </div>
    </div>
}
